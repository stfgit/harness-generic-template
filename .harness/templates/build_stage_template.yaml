template:
  name: build stage template
  identifier: build_stage_template
  orgIdentifier: stf
  projectIdentifier: harness_generic_template
  versionLabel: v1
  type: Stage
  spec:
    type: CI
    spec:
      infrastructure:
        type: KubernetesDirect
        spec:
          connectorRef: <+input>
          namespace: ci
          automountServiceAccountToken: true
          os: Linux
      execution:
        steps:
          - step:
              name: Run Build
              identifier: run_build
              type: Run
              spec:
                image: <+input>
                shell: Bash
                command: <+input>
                resources:
                  limits:
                    cpu: 2000m
                    memory: 2Gi
