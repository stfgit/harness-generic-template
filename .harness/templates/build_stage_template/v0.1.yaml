template:
  name: build stage template
  identifier: build_stage_template
  versionLabel: v0.1
  type: Stage
  projectIdentifier: harness_generic_template
  orgIdentifier: stf
  tags: {}
  icon: data:image/jpeg;base64,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
  spec:
    type: CI
    spec:
      cloneCodebase: true
      infrastructure:
        type: KubernetesDirect
        spec:
          connectorRef: <+input>
          namespace: ci
          automountServiceAccountToken: true
          os: Linux
      execution:
        steps:
          - step:
              name: Run Build
              identifier: run_build
              type: Run
              spec:
                connectorRef: <+input>.allowedValues(org.Dockerhub,account.harnessImage)
                image: <+input>
                shell: Bash
                command: <+input>
                resources:
                  limits:
                    memory: 2Gi
                    cpu: 2000m
